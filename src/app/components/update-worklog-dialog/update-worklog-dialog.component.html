<div class="updatelog-Dialog">
    <div class="flex-between dialog-box-title">
        <h2 class="m-0">Work Log</h2>
        <button class="dialog-box-close" (click)="closeDialog()"><img src="/assets/img/btn_close.png" /></button>
    </div>
    <div class="dialog-box-content">
        <div class="loader" *ngIf="(loading$ | async)"><img src="/assets/img/1.gif" /></div>
        <form *ngIf="!(loading$ | async)" [formGroup]="updateWorkLogForm">
            <div style="width: auto; overflow-y: auto;">
                <div class="form-group row">
                    <label class="col-sm-3 control-label">Work Item Name</label>
                    <div class="col-sm-9">
                        <a href="project/project-backlog/workItem/{{data.workLog.projectWorkId}}" style="text-decoration: none; text-overflow: ellipsis;">
                            <img src="/assets/img/task.png" class="imgPadding">
                            TA{{data.workLog.projectWorkId}} : {{data.workLog.title}}
                        </a>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 control-label">Work Done By</label>
                    <div class="col-sm-9">
                        {{data.workLog.assignedTo}}
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 control-label">Work Done On</label>
                    <div class="col-sm-9">
                        <mat-form-field appearance="outline">
                            <input matInput [matDatepicker]="workDoneOn" formControlName="workDoneOn"
                                [matDatepickerFilter]="dateFilter">
                            <mat-datepicker-toggle matIconSuffix [for]="workDoneOn"></mat-datepicker-toggle>
                            <mat-datepicker #workDoneOn></mat-datepicker>
                        </mat-form-field>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 control-label">Work Time</label>
                    <div class="col-sm-9 flex-between">
                        <mat-form-field appearance="outline" class="me-2">
                            <mat-label>Hours</mat-label>
                            <input matInput type="number" min="0" max="23" formControlName="workTimeHours"
                                (change)="updateTime()">
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label>Minutes</mat-label>
                            <mat-select formControlName="workTimeMinutes" (selectionChange)="updateTime()">
                                <mat-option [value]="0">
                                    0
                                </mat-option>
                                <mat-option [value]="0.25">
                                    15
                                </mat-option>
                                <mat-option [value]="0.5">
                                    30
                                </mat-option>
                                <mat-option [value]="0.75">
                                    45
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 control-label">Description</label>
                    <div class="col-sm-9 flex-between">
                        <mat-form-field appearance="outline" class="w-100">
                            <textarea matInput formControlName="description"></textarea>
                        </mat-form-field>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 control-label"></label>
                    <div class="col-sm-9">
                        <mat-checkbox formControlName="updateRemainingEst" color="primary"
                            (change)="remaningDisable()">Update Remaining Est</mat-checkbox>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 control-label"></label>
                    <div class="col-sm-9 flex-between">
                        <mat-form-field appearance="outline" class="me-2">
                            <mat-label>Hours</mat-label>
                            <input matInput type="number" min="0" max="23" formControlName="remainingEstHours"
                                (change)="remaningDisable()">
                        </mat-form-field>
                        <mat-form-field appearance="outline">
                            <mat-label>Minutes</mat-label>
                            <mat-select formControlName="remainingEstMinutes" (selectionChange)="remaningDisable()">
                                <mat-option [value]="0">
                                    0
                                </mat-option>
                                <mat-option [value]="0.25">
                                    15
                                </mat-option>
                                <mat-option [value]="0.5">
                                    30
                                </mat-option>
                                <mat-option [value]="0.75">
                                    45
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-md-4">
                        <div class="EstBox">Original Est<br>{{data.workLog.originalEstTime}} hours</div>
                    </div>
                    <div class="col-md-4">
                        <div class="EstBox">Remaining Hours<br>{{(remaningEstTimeValue) ??
                            (((data.workLog.remainingEstTime - workdoneOn) > 0) ? (data.workLog.remainingEstTime -
                            workdoneOn) : 0)}} hours</div>
                    </div>
                    <div class="col-md-4">
                        <div class="EstBox">Total Work Done<br>{{data.workLog.totalWorkDone + workdoneOn}} hours</div>
                    </div>
                </div>
                <div class="progress w-100" style="height: 20px;">
                    <div class="progress-bar" role="progressbar"
                        [ngStyle]="getProgressWidth(data.workLog.originalEstTime, data.workLog.remainingEstTime)">
                        {{getProgressWidthInNum(data.workLog.originalEstTime, data.workLog.remainingEstTime) |
                        number:'1.0-2'}}% Complete</div>
                </div>
            </div>
            <div class="modal-footer mt-2">
                <button type="button" class="btn btn-primary theme-btn rounded-0 me-2"
                    (click)="addWorkLog((data.workLog.totalWorkDone + workdoneOn), ((remaningEstTimeValue) ??
                (((data.workLog.remainingEstTime - workdoneOn) > 0) ? (data.workLog.remainingEstTime - workdoneOn) : 0)))"><i class="fa fa-save"></i>&nbsp;Save</button>
                <button type="button" class="btn btn-default" (click)="closeDialog()"><i
                        class="fa fa-close"></i>&nbsp;Close</button>
            </div>
        </form>
    </div>
</div>